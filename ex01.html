<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="doctor.css">
    <!-- <script src="include.js" type="text/javascript"></script> -->
    <script src="https://unpkg.com/hangul-js" type="text/javascript"></script>


</head>
<body>
    <!-- <div class="wrap">
        <header data-include-path="header.html">
        </header>
        <footer data-include-path="footer.html"></footer>
    </div> -->
    <div class="top">top임시</div>
    <section class="container" id="container">
        <form action="">
            <div class="search_bg">
                <div class="search_contents">
                    <p class="title">
                        아래 진료과명, 전문분야, 주 의료 서비스 등의 안내정보를 검색하시거나<br>
                        진료과명 초성검색을 이용하시면 보다 쉽게 찾으실 수 있습니다. 
                    </p>
                    <div class="search">
                        <input type="text" name="keyword" id="keyword" placeholder="진료과명 또는 질환명(전문분야) 검색">
                        <button type="submit" id="searchBtn"></button>
                    </div>
                    <div class="btn_list">
                        <ul id="btn_search">
                            <li><button type="button" class="choBtn t active">전체</button></li>
                            <li><button type="button" data-val="ㄱ" class="choBtn">ㄱ</button></li>
                            <li><button type="button" data-val="ㄴ" class="choBtn">ㄴ</button></li>
                            <li><button type="button" data-val="ㄷ" class="choBtn">ㄷ</button></li>
                            <li><button type="button" data-val="ㄹ" class="choBtn">ㄹ</button></li>
                            <li><button type="button" data-val="ㅁ" class="choBtn">ㅁ</button></li>
                            <li><button type="button" data-val="ㅂ" class="choBtn">ㅂ</button></li>
                            <li><button type="button" data-val="ㅅ" class="choBtn">ㅅ</button></li>
                            <li><button type="button" data-val="ㅇ" class="choBtn">ㅇ</button></li>
                            <li><button type="button" data-val="ㅈ" class="choBtn">ㅈ</button></li>
                            <li><button type="button" data-val="ㅊ" class="choBtn">ㅊ</button></li>
                            <li><button type="button" data-val="ㅋ" class="choBtn">ㅋ</button></li>
                            <li><button type="button" data-val="ㅌ" class="choBtn">ㅌ</button></li>
                            <li><button type="button" data-val="ㅍ" class="choBtn">ㅍ</button></li>
                            <li><button type="button" data-val="ㅎ" class="choBtn">ㅎ</button></li>
                            <li><button type="button" class="choBtn etc">기타(A~Z)</button></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="contests_dept">
                <ul class="dept_list" id="search">
                    <li class="name active"><a href="FM.html">
                        <div class="icon"><img src="image/default.png" alt=""></div>
                        <div class="dept_text">가정의학과</div></a>
                    </li>
                    <li class="name"><a href="ID.html">
                        <div class="icon"><img src="image/default (1).png" alt=""></div>
                        <div class="dept_text">감염내과</div></a>
                    </li>
                    <li class="name"><a href="EDDO.html">
                        <div class="icon"><img src="image/default (2).png" alt=""></div>
                        <div class="dept_text">내분비내과</div></a>
                    </li>
                    <li class="name"><a href="OG.html">
                        <div class="icon"><img src="image/default (8).png" alt=""></div>
                        <div class="dept_text">산부인과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (9).png" alt=""></div>
                        <div class="dept_text">성형외과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (10).png" alt=""></div>
                        <div class="dept_text">소아과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (12).png" alt=""></div>
                        <div class="dept_text">신경외과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (17).png" alt=""></div>
                        <div class="dept_text">안과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (19).png" alt=""></div>
                        <div class="dept_text">영상의학과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (21).png" alt=""></div>
                        <div class="dept_text">응급의학과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (26).png" alt=""></div>
                        <div class="dept_text">정신건강의학과</div></a>
                    </li>
                    <li class="name"><a href="">
                        <div class="icon"><img src="image/default (27).png" alt=""></div>
                        <div class="dept_text">정형외과</div></a>
                    </li>
                </ul>
            </div>
        </form>
    </section>
    <footer>
        <a href="#top"><img src="image/icon_top.png" alt=""></a>
    </footer>
    
    <script>
        //검색창 검색
        document.getElementById('searchBtn').addEventListener('click', function(event) {
        event.preventDefault();
        const keyword = document.getElementById('keyword').value;
        const deptItems = document.querySelectorAll('.dept_list .name');
        deptItems.forEach(item => {
            const deptText = item.querySelector('.dept_text').innerText;
                if (deptText.includes(keyword) || keyword == '') {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        });


        //초성버튼
      // 초성 버튼 클릭 이벤트 처리
        const choBtn = document.querySelectorAll(".choBtn");
        const choDept = document.querySelectorAll(".dept_list .name");

        choBtn.forEach(btn => {
            btn.addEventListener("click", (e) => {
                e.preventDefault();

                const selectedVal = e.target.dataset.val;

                choBtn.forEach(button => button.classList.remove("active"));
                choDept.forEach(dept => {
                    const deptText = dept.querySelector('.dept_text').innerText;
                    const initialSound = cho_hangul(deptText[0]);
                    
                    if (initialSound === selectedVal) {
                        dept.style.display = '';
                    } else {
                        dept.style.display = 'none';
                    }
                });

                e.target.classList.add("active");
            });
        });
        

        //초성추출
        function cho_hangul(str) {
            const cho = ["ㄱ", "ㄲ", "ㄴ", "ㄷ", "ㄸ", "ㄹ", "ㅁ", "ㅂ", "ㅃ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅉ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"];
            let result = "";

            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                if (char >= 0xAC00 && char <= 0xD7A3) {
                    const code = char - 0xAC00;
                    result += cho[Math.floor(code / 588)];
                } else {
                    // 초성 외의 문자 처리 (여기서는 그대로 반환)
                    result += str[i];
                }
            }
            return result;
        }

        // 전체버튼
        document.querySelector(".choBtn.t").addEventListener("click", (e) => {
            e.preventDefault();
            
            // 모든 항목을 표시
            document.querySelectorAll('.dept_list .name').forEach(item => item.style.display = '');
            
            // 모든 버튼의 active 클래스를 제거
            document.querySelectorAll(".choBtn").forEach(btn => btn.classList.remove("active"));
            
            // 전체 버튼에 active 클래스 추가
            e.target.classList.add("active");
        });

        document.addEventListener('DOMContentLoaded', () => {
            const choBtnAll = document.querySelector(".choBtn.t");
            const choDept = document.querySelectorAll('.dept_list .name');
            
            choBtnAll.classList.add("active");
            
            choDept.forEach(item => item.style.display = 'block');
        });


    </script>
</body>
</html>